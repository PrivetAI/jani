#!/bin/bash

BOT_TOKEN="8551138970:AAFbXC1xWIGFBh8t0AEpMAjgvaWC_KHxc3M"
MESSAGE='–ú—ã —Ç–∏—Ö–æ –ø—Ä–æ–∫–∞—á–∞–ª–∏ Inny üöÄ

–¢–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏:
üîû –ó–∞—â–∏—Ç–∞ –æ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏–∏, –æ–±—â–∞–π—Å—è –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã
üé≠ 30+ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: –∞–Ω–∏–º–µ, –∫–∞–Ω–æ–Ω, –Ω–µ –∫–∞–Ω–æ–Ω + –º–æ–∂–µ—à—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏
üß† –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å ‚Äî –æ—Ç–≤–µ—Ç—ã —É–º–Ω–µ–µ –∏ –∂–∏–≤–µ–µ
‚ö°Ô∏è –±–µ–∑ –ª–∞–≥–æ–≤ –∏ –±–∞–≥–æ–≤
üîÅ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
(–µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –∑–∞—à—ë–ª ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏, –Ω–µ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –ª–∏–º–∏—Ç)

–î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏:
Grok ‚Ä¢ Gemini ‚Ä¢ GPT ‚Ä¢ DeepSeek

üîí –í Premium –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
–¥–ª—è —Å–≤–æ–∏—Ö –∏–¥–µ–π, –∏—Å—Ç–æ—Ä–∏–π –∏ –ª–∏—á–Ω—ã—Ö —Å—é–∂–µ—Ç–æ–≤ –±–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

üí¨ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ
–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–∏–∞–ª–æ–≥ –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏

üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
–ø—Ä–∏–≥–ª–∞—Å–∏–ª –¥—Ä—É–≥–∞ ‚Üí +100 —Å–æ–æ–±—â–µ–Ω–∏–π –≤–∞–º –æ–±–æ–∏–º
–µ—Å–ª–∏ –¥—Ä—É–≥ —Å–æ–≤–µ—Ä—à–∏—Ç –ª—é–±—É—é –ø–æ–∫—É–ø–∫—É ‚Üí +50 —Å–æ–æ–±—â–µ–Ω–∏–π —Å–≤–µ—Ä—Ö—É

–ó–∞–π–¥–∏ –∏ –ø–æ–ø—Ä–æ–±—É–π –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é ‚ú®'

USER_IDS=$(cat /home/vik/work/business/jani/inactive_users.txt | jq -r '.[]')

SENT=0
FAILED=0

for USER_ID in $USER_IDS; do
    RESPONSE=$(curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
        -H "Content-Type: application/json" \
        -d "{\"chat_id\": ${USER_ID}, \"text\": $(echo "$MESSAGE" | jq -Rs .)}")
    
    OK=$(echo "$RESPONSE" | jq -r '.ok')
    
    if [ "$OK" = "true" ]; then
        ((SENT++))
        echo "‚úì Sent to $USER_ID"
    else
        ((FAILED++))
        ERROR=$(echo "$RESPONSE" | jq -r '.description // "Unknown error"')
        echo "‚úó Failed $USER_ID: $ERROR"
    fi
    
    # Rate limit: 30 msg/sec max, use 20 to be safe
    sleep 0.05
done

echo ""
echo "=== DONE ==="
echo "Sent: $SENT"
echo "Failed: $FAILED"
